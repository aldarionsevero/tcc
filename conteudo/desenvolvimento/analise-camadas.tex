\section{Camadas de Ambiente}
\label{sec:cam-amb}

As camadas apresentam um conjunto de aspectos do sistema e contém as
informações necessárias que definem o comportamento específico para o
estado desejado daquele ambiente. Os atributos de cada camada são variantes
que são consideradas para o \textit{deployment} de uma aplicação. Sendo assim, as
camadas são dependentes para o nível de compatibilidade da configuração.

\subsection{Levantamento de Camadas de Ambiente}
As seguintes camadas foram definidas para representar o estado de configuração do
sistema:
\begin{itemize}
  \item \textit{\textbf{Hardware}}: definições físicas onde o sistema foi implantado.
    (Arquitetura, memória, espaço em disco, etc);
  \item \textit{\textbf{Operation System}}: definições do sistema operacional
    implantado. Distribuição, arquitetura, versão, etc;
  \item \textit{\textbf{Application}}: definições das aplicações instaladas.
    (Aplicações instaladas, dependências, etc);
  \item \textit{\textbf{Configuration}}: definições das configurações das
    aplicações. (Especificações de implantação de aplicação, arquivos
    de configuração);
  \item \textit{\textbf{Service}}: definições dos serviços daemon que estão em
    funcionamento no sistema.
  \item \textit{\textbf{Custom}}: definições criadas especificamente para o
    sistema sem uma forma padrão conhecida.
\end{itemize}

\subsubsection{\textit{Hardware}}
\label{sec:cam-hard}

A camada de \textit{Hardware} contém as definições físicas do sistema.
As informações são referentes as configurações físicas da máquina, como
CPU, arquitetura, memória, espaço em disco, particionamento, etc. O informe desses atributos
são utilizados para a definição da base do ambiente, ou seja, o sistema
operacional e as aplicações podem ter diferentes desempenhos a partir das
configurações de hardware e/ou apresentar comportamentos inesperados no sistema.
Além das aplicações terem seus requisitos mínimos, algumas são desenhadas
para um tipo específico de arquitetura.

A tabela~\ref{tab:atrhard} mostra diversas informações de hardware possíveis de serem extraídas
do sistema a partir de comandos do sistema operacional e também da ferramenta Ohai, 
dependência prevista para a implementação do Cupper (como descrito na 
seção~\ref{sec:tec}). Nem todas essas informações serão úteis para a 
implementação, mas nessa seção fazemos um levantamento geral antes de fazer uma
seleção.

A camada de hardware será uma das camadas a serem analisadas, e a seleção de 
seus atributos irão seguir os critérios descritos na seção~\ref{sec:defcritcamada}.


\begin{table}[H]
\centering
\caption{Atributos Relacionados a CPU, Memória e \textit{Motherboard}}
\label{tab:atrhard}
\begin{tabular}{|c|c|c|c|c|}
\hline
\rowcolor[HTML]{C0C0C0} 
Atributo                                                        & Origem                                                  & Relevante? & Difícil integração? & Será selecionado? \\ \hline
Modelo CPU                                                      & lscpu/ohai                                              & não        & não                 & não               \\ \hline
\begin{tabular}[c]{@{}c@{}}Modo de \\ Operação CPU\end{tabular} & lscpu/ohai                                              & sim        & não                 & sim               \\ \hline
Arquitetura CPU                                                 & lscpu/ohai                                              & sim        & não                 & sim               \\ \hline
Cores                                                           & lscpu/ohai                                              & sim        & não                 & sim               \\ \hline
Stepping CPU                                                    & lscpu/ohai                                              &            & não                 &                   \\ \hline
Frequência CPU                                                  & lscpu/ohai                                              &            & não                 &                   \\ \hline
Cache CPU                                                       & lscpu/ohai                                              &            & não                 &                   \\ \hline
Flags CPU                                                       & lscpu/ohai                                              & sim        & não                 & sim               \\ \hline
\begin{tabular}[c]{@{}c@{}}Modelo \\ Motherboard\end{tabular}   & demicode                                                & não        & sim                 & não               \\ \hline
Versão BIOS                                                     & demicode                                                & não        & sim                 & não               \\ \hline
Flags BIOS                                                      & demicode                                                & não        & sim                 & não               \\ \hline
Slots Memória                                                   & ohai                                                    & não        & não                 & não               \\ \hline
Marca Memória                                                   & \begin{tabular}[c]{@{}c@{}}ohai\\ demicode\end{tabular} & não        & não                 & não               \\ \hline
Tamanho Memória                                                 & ohai/free                                               & sim        & não                 & sim               \\ \hline
Clock Memória                                                   & ohai                                                    & sim        & não                 & sim               \\ \hline
Total Swap                                                      & ohai                                                    & sim        & não                 & sim               \\ \hline
Livre Swap                                                      & ohai                                                    & sim        & não                 & sim               \\ \hline
Total Memória                                                   & ohai                                                    & sim        & não                 & sim               \\ \hline
Livre Memória                                                   & ohai                                                    & sim        & não                 & sim               \\ \hline
Buffers Memóra                                                  & ohai                                                    & não        & não                 & não               \\ \hline
Cached Memória                                                  & ohai                                                    &            & não                 &                   \\ \hline
Ativo Memória                                                   &                                                         &            & não                 &                   \\ \hline
Inativo Memória                                                 &                                                         &            & não                 &                   \\ \hline
Sujo Memória                                                    &                                                         &            & não                 &                   \\ \hline
\begin{tabular}[c]{@{}c@{}}Pag. Anon\\ Memória\end{tabular}     &                                                         &            & não                 &                   \\ \hline
\end{tabular}
\end{table}

\begin{table}[H]
\centering
\caption{Atributos relacionados a Partições, Armazenamento, USB, PCI, e Rede}
\label{tab:hdmount}
\begin{tabular}{|c|c|c|c|c|}
\hline
\rowcolor[HTML]{C0C0C0} 
Atributo                                                                 & Origem                                                                & Relevante? & Difícil integração? & Será selecionado? \\ \hline
\begin{tabular}[c]{@{}c@{}}Nome\\ dos\\ Dispositivos\end{tabular}        & \begin{tabular}[c]{@{}c@{}}lsblk/\\ ohai\end{tabular}                 &            &                     &                   \\ \hline
\begin{tabular}[c]{@{}c@{}}Major/Minor\\ Dispositivos\end{tabular}       & \begin{tabular}[c]{@{}c@{}}lsblk/\\ ohai\end{tabular}                 &            &                     &                   \\ \hline
Removíveis                                                               & \begin{tabular}[c]{@{}c@{}}lsblk/\\ ohai\end{tabular}                 &            &                     &                   \\ \hline
\begin{tabular}[c]{@{}c@{}}Somente\\ Leitura\end{tabular}                & \begin{tabular}[c]{@{}c@{}}lsblk/\\ ohai\end{tabular}                 &            &                     &                   \\ \hline
Partições                                                                & \begin{tabular}[c]{@{}c@{}}lsblk/\\ ohai\end{tabular}                 &            &                     &                   \\ \hline
\begin{tabular}[c]{@{}c@{}}Tamanho\\ Partições/\\ Discos\end{tabular}    & \begin{tabular}[c]{@{}c@{}}lsblk/\\ ohai/\\ df\end{tabular}           &            &                     &                   \\ \hline
\begin{tabular}[c]{@{}c@{}}Tipo\\ Filesystem\\ Dispositivos\end{tabular} & \begin{tabular}[c]{@{}c@{}}lsblk/\\ ohai\end{tabular}                 &            &                     &                   \\ \hline
\begin{tabular}[c]{@{}c@{}}UUID\\ Dispositivos\end{tabular}              & \begin{tabular}[c]{@{}c@{}}lsblk/\\ ohai\end{tabular}                 &            &                     &                   \\ \hline
Mountpoints                                                              & \begin{tabular}[c]{@{}c@{}}mount/\\ ohai\end{tabular}                 &            &                     &                   \\ \hline
\begin{tabular}[c]{@{}c@{}}USB\\ Dsipositivos\end{tabular}               & lsusb                                                                 &            &                     &                   \\ \hline
\begin{tabular}[c]{@{}c@{}}PCI\\ Dsipositivos\end{tabular}               & lspci                                                                 &            &                     &                   \\ \hline
\begin{tabular}[c]{@{}c@{}}Rede\\ Dispositivos\end{tabular}              & \begin{tabular}[c]{@{}c@{}}lspci/\\ ifconfig/\\ demicode\end{tabular} &            &                     &                   \\ \hline
\end{tabular}
\end{table}

{\color{red} colocar uma tabela com saida dos comandos lscpu, lshw, hwinfo, lspci
lsscsi, lsusb, lsblk, df, mount, free, e ohai}

{\color{red} explicar de onde vem cada informação, e cada comando}

{\color{red} tirar o que for redundante}

%TODO: adicionar as informações que serão coletadas.

\subsubsection{\textit{Operation System}}
\label{sec:cam-os}

A segunda camada de extração de dados é a do Sistema Operacional. 
Cada sistema tem a sua particularidade com relação aos gerenciamento dos 
recursos de hardware e administração de processos. Portanto é necessário a 
construção de uma arquitetura flexível, que contenha os aspectos em comum aos
sistemas operacionais, e modular para que seja possível escalar a utilização 
da ferramenta para mais Sistemas Operacionais.

Inicialmente a ferramenta Cupper irá abordar dois sistemas operacionais, 
ambos baseados em GNU/Linux: Archlinux e Debian.

A tabela~\ref{} mostra informações a respeito do Kernel e da distribuição
analisada extraídas a partir de comandos do próprio sistema ou do Ohai.


{\color{red} tabela com infos de distro, versões, pkg manager tool, e kernel do ohai}

{\color{red} detectar qual init system é usado verificando existência de diretórios
e outros métodos}

{\color{red} extrair qual sistema de segurança é usado verificando existência
do apparmour, selinux ou grsecurity}

{\color{red} explicar de onde veio cada dado}

%TODO: a seleção de camadas e profundidade de análise serão postas dentro das
%   especificações de cada camada.

